# Rime schema
# encoding: utf-8

schema:
    schema_id: chinese_flypy_xhup
    name: "â˜¯æ¼¢èªÂ·å°é¶´é›™æ‹¼"
    version: "0.1"
    author:
        - double pinyin layout by é¶´
        - Modified by Kevin <kevobras@gmail.com>
    description: |
        å°é¹¤åŒæ‹¼æ–¹æ¡ˆ
        ä¸­è‹±æ··è¾“æ”¯æŒ
        è‡ªå®šä¹‰è¯åº“
        ç¬”ç”»åæŸ¥
    dependencies:
        - english

switches:
    - name: traditionalization
      reset: 0
      # states: [ ç®€, ç¹ ]
    - name: emoji_suggestion
      reset: 0
      # states: [ "ğŸ˜‘ï¸", "ğŸ˜ï¸" ]
    - name: ascii_punct
      reset: 1
      # states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
    - name: full_shape
      reset: 0
      # states: [ åŠ, å…¨ ]
    - name: ascii_mode
      reset: 0
      # states: [ ä¸­, è‹± ]

engine:
    processors:
        - ascii_composer # Windows ç”¨æˆ·è¯·è§£é™¤æ­¤è¡Œæ³¨é‡Šï¼Œå¦åˆ™å°†ä¼šæ— æ³•åˆ‡æ¢åˆ°è‹±æ–‡è¾“å…¥
        - recognizer
        # - lua_processor@select_character_processor # lua é€‰è¯æ‰©å±•ï¼Œå¦‚éœ€å…³é—­è¯·æ³¨é‡Š
        - key_binder
        - speller
        - selector
        - punctuator
        - navigator
        - express_editor
    segmentors:
        - ascii_segmentor
        - matcher
        - abc_segmentor
        - punct_segmentor
        - fallback_segmentor
    translators:
        - punct_translator
        - table_translator@custom_phrase # ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸
        - table_translator@english # è‹±æ–‡è¾“å…¥
        - reverse_lookup_translator
        - lua_translator@date_translator # åŠ¨æ€æ—¥æœŸæ—¶é—´è¾“å…¥
        - script_translator
    filters:
        - uniquifier
        - simplifier
        - simplifier@traditionalize # ç®€å…¥ç¹å‡º
        # - simplifier@emoji_suggestion
        # - lua_filter@long_phrase_first # æœ€é•¿è¯ç»„å’Œå•å­—åœ¨å…ˆ
        # - lua_filter@single_char_first # å•å­—ä¼˜å…ˆ
        # - lua_filter@single_char_only # åªæ˜¾ç¤ºå•å­—

emoji_suggestion:
    opencc_config: emoji.json
    option_name: emoji_suggestion
    tips: all

english:
    dictionary: english
    enable_completion: true
    enable_sentence: false
    initial_quality: -1 # åˆå§‹æƒé‡, è‹±æ–‡è¯åº“ä¸åŒæ‹¼é‡ç æ—¶è‹±æ–‡ç½®åæ˜¾ç¤º
    comment_format: # è‡ªå®šä¹‰æç¤ºç 
        - xform/.*// # æ¸…ç©ºæç¤ºç 

speller:
    alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA/
    # finals: "'"
    delimiter: " '"
    algebra:
        - erase/^xx$/
        - erase/^hm$/
        - erase/^m$/
        - erase/^n$/
        - erase/^ng$/

        # æ¨¡ç³ŠéŸ³åŒºåŸŸ
        # ä¾æ®ä¸ªäººæƒ…å†µä¿®æ”¹æ³¨é‡Šï½
        # æ³¨é‡Šæ ¼å¼ï¼šé”®ç›˜çš„è¾“å…¥ç  -> è½¬åŒ–åçš„è¾“å…¥ç 

        # å£°æ¯éƒ¨åˆ†
        # - derive/^([z])h/$1/ # z -> zh
        # - derive/^([z])([^h])/$1h$2/ # zh -> z
        # - derive/^([c])h/$1/ # c -> ch
        # - derive/^([c])([^h])/$1h$2/ # ch -> c
        # - derive/^([s])h/$1/ # s -> sh
        # - derive/^([s])([^h])/$1h$2/ # sh -> s
        # - derive/^l/n/ # n -> l
        # - derive/^n/l/ # l -> n
        # - derive/^r/l/ # l -> r
        # - derive/^r/y/ # y -> r
        # - derive/^hu$/fu/ # fu -> hu
        # - derive/^fu$/hu/ # hu -> fu

        # éŸµæ¯éƒ¨åˆ†
        - derive/([^iu])([a])n$/$1$2ng/ # ang -> an
        - derive/([^iu])([a])ng$/$1$2n/ # an -> ang
        - derive/([e])n$/$1ng/ # eng -> en
        - derive/([e])ng$/$1n/ # en -> eng
        - derive/([i])n$/$1ng/ # ing -> in
        - derive/([i])ng$/$1n/ # in -> ing
        - derive/([i])an$/$1ang/ # iang -> ian
        - derive/([i])ang$/$1an/ # ian -> iang
        # ç”±äºå°é¹¤åŒæ‹¼ç‰¹æ€§ï¼Œæ— éœ€ uang <-> iang

        # å…¶å®ƒæ¨¡ç³ŠéŸ³
        # - derive/^hui$/fei/ # fei -> hui
        # - derive/^fei$/hui/ # hui -> fei
        # - derive/^huang$/wang/ # wang -> huang
        # - derive/^wang$/huang/ # huang -> wang
        # - derive/^([bpmfw])eng$/$1ong/ # bpmfw åæ¥ ong -> bpmfw åæ¥ eng

        # å°é¹¤åŒæ‹¼ç è¡¨
        - derive/^([jqxy])u$/$1v/
        - derive/^([aoe])([ioun])$/$1$1$2/
        - xform/^([aoe])(ng)?$/$1$1$2/
        - xform/iu$/Q/
        - xform/(.)ei$/$1W/
        - xform/uan$/R/
        - xform/[uv]e$/T/
        - xform/un$/Y/
        - xform/^sh/U/
        - xform/^ch/I/
        - xform/^zh/V/
        - xform/uo$/O/
        - xform/ie$/P/
        - xform/i?ong$/S/
        - xform/ing$|uai$/K/
        - xform/(.)ai$/$1D/
        - xform/(.)en$/$1F/
        - xform/(.)eng$/$1G/
        - xform/[iu]ang$/L/
        - xform/(.)ang$/$1H/
        - xform/ian$/M/
        - xform/(.)an$/$1J/
        - xform/(.)ou$/$1Z/
        - xform/[iu]a$/X/
        - xform/iao$/N/
        - xform/(.)ao$/$1C/
        - xform/ui$/V/
        - xform/in$/B/
        - xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/

        # ç®€æ‹¼æ”¯æŒ
        - abbrev/^(.).+$/$1/

translator:
    dictionary: chinese_pinyin
    prism: chinese_flypy_xhup # å€¼ä¸idç›¸åŒ, å¦‚æœå»æ‰ä¼šå˜å…¨æ‹¼
    contextual_suggestions: true
    # max_homophones: 7
    # preedit_format:
        # è¾“å…¥ç ç¿»è¯‘ä¸ºæ‹¼éŸ³
        # - xform/([bpmfdtnljqx])n/$1iao/
        # - xform/(\w)g/$1eng/
        # - xform/(\w)q/$1iu/
        # - xform/(\w)w/$1ei/
        # - xform/([dtnlgkhjqxyvuirzcs])r/$1uan/
        # - xform/(\w)t/$1ve/
        # - xform/(\w)y/$1un/
        # - xform/([dtnlgkhvuirzcs])o/$1uo/
        # - xform/(\w)p/$1ie/
        # - xform/([jqx])s/$1iong/
        # - xform/(\w)s/$1ong/
        # - xform/(\w)d/$1ai/
        # - xform/(\w)f/$1en/
        # - xform/(\w)h/$1ang/
        # - xform/(\w)j/$1an/
        # - xform/([gkhvuirzcs])k/$1uai/
        # - xform/(\w)k/$1ing/
        # - xform/([jqxnl])l/$1iang/
        # - xform/(\w)l/$1uang/
        # - xform/(\w)z/$1ou/
        # - xform/([gkhvuirzcs])x/$1ua/
        # - xform/(\w)x/$1ia/
        # - xform/(\w)c/$1ao/
        # - xform/([dtgkhvuirzcs])v/$1ui/
        # - xform/(\w)b/$1in/
        # - xform/(\w)m/$1ian/
        # - xform/([aoe])\1(\w)/$1$2/
        # - "xform/(^|[ '])v/$1zh/"
        # - "xform/(^|[ '])i/$1ch/"
        # - "xform/(^|[ '])u/$1sh/"
        # - xform/([jqxy])v/$1u/
        # - xform/([nl])v/$1Ã¼/
        # - xform/ // # å»æ‰ä¸Šå±å­—ç¬¦é—´ç©ºæ ¼

grammar:
    language: octagram/zh-hans-t-essay-bgw

traditionalize:
    option_name: traditionalization
    opencc_config: s2t.json # s2t.json | s2hk.json | s2tw.json | s2twp.json  # å¦‚æœé€‰æ‹©å°æ¹¾ç¹ä½“ï¼Œé•¿å¥å­æ­£å¸¸ï¼Œä½†1~2ä¸ªå­—æ—¶æ— æ³•æ­£ç¡®è½¬æ¢å°æ¹¾ç¹ä½“ï¼Œä»ç„¶æ˜¾ç¤ºé¦™æ¸¯ç¹ä½“ï¼Œä¸çŸ¥é“ä¸ºå•¥ã€‚
    tips: all # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
    # excluded_types: [reverse_lookup] # ä¸è½¬æ¢åæŸ¥çš„å†…å®¹

punctuator:
    import_preset: symbols

key_binder:
    import_preset: default
    bindings:
        - { accept: semicolon, send: 2, when: has_menu } #åˆ†å·æ¬¡é€‰

recognizer:
    import_preset: default
    patterns:
        punct: "^/([0-9]0?|[A-Za-z]+)$" # Symbol
        # reverse_lookup: "^`[a-z]*'?$" # åæŸ¥
        reverse_lookup: "[a-z`]*`+[a-z`]*" # åæŸ¥
        # email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
        # uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
        # html: "^<[a-z]+>$"
        # camel: "[a-z]+[A-Z].*$"
        # url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]{1,11}[.:_].*$"

custom_phrase:
    dictionary: ""
    user_dict: custom_phrase
    db_class: stabledb
    enable_completion: false
    enable_sentence: true
    initial_quality: 1

reverse_lookup:
    dictionary: chinese_flypydz
    enable_completion: true
    prefix: "`"
    suffix: "'"
    tips: ã€”éŸ³å½¢ã€•
    comment_format:
        - xform/.*// # æ¸…ç©ºæç¤ºç 
